{"ast":null,"code":"import _regeneratorRuntime from\"E:/003_Personal_Portfolio/Experimental/evenx-main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/003_Personal_Portfolio/Experimental/evenx-main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/003_Personal_Portfolio/Experimental/evenx-main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import MainScreen from'../../components/MainScreen';import{Form,Button,Row,Col}from'react-bootstrap';import ErrorMessage from'./../../components/ErroMessage/ErrorMessage';import Loading from'./../../components/Loading/Loading';import{Link,useHistory}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{register}from'./../../actions/userAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegisterScreen=function RegisterScreen(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(\"https://icon-library.com/images/anonymous-avatar-icon/anonymous-avatar-icon-25.jpg\"),_useState6=_slicedToArray(_useState5,2),pic=_useState6[0],setPic=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),confirmpassword=_useState10[0],setConfirmPassword=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),message=_useState12[0],setMessage=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),picMessage=_useState14[0],setPicMessage=_useState14[1];var dispatch=useDispatch();var userRegister=useSelector(function(state){return state.userRegister;});var loading=userRegister.loading,error=userRegister.error,userInfo=userRegister.userInfo;var history=useHistory();useEffect(function(){if(userInfo){history.push('/myevents');}},[history,userInfo]);var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(password!==confirmpassword){setMessage('Passwords do not match');}else{dispatch(register(name,email,password,pic));}case 2:case\"end\":return _context.stop();}}},_callee);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();var postDetails=function postDetails(pics){if(!pics){return setPicMessage('Please select an image');}setPicMessage(null);if(pics.type==='image/jpeg'||pics.type==='image/png'){var data=new FormData();data.append('file',pics);data.append('upload_preset','evenx');data.append('cloud_name','dyl8nylbd');fetch('https://api.cloudinary.com/v1_1/dyl8nylbd/image/upload',{method:'post',body:data}).then(function(res){return res.json();}).then(function(data){console.log(data);setPic(data.url.toString());}).catch(function(err){console.log(err);});}else{return setPicMessage('Please select an image');}};return/*#__PURE__*/_jsx(MainScreen,{title:\"REGISTER\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loginContainer\",children:[error&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:error}),message&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:message}),loading&&/*#__PURE__*/_jsx(Loading,{}),/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"name\",value:name,placeholder:\"Enter name\",onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formBasicEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",value:email,placeholder:\"Enter email\",onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:password,placeholder:\"Password\",onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"confirmPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",value:confirmpassword,placeholder:\"Confirm Password\",onChange:function onChange(e){return setConfirmPassword(e.target.value);}})]}),picMessage&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:picMessage}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"pic\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Profile Picture\"}),/*#__PURE__*/_jsx(Form.File,{onChange:function onChange(e){return postDetails(e.target.files[0]);},id:\"custom-file\",type:\"image/png\",label:\"Upload Profile Picture\",custom:true})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",style:{marginTop:10},children:\"Register\"})]}),/*#__PURE__*/_jsx(Row,{className:\"py-3\",children:/*#__PURE__*/_jsxs(Col,{style:{fontSize:24},children:[\"Have an Account ? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",style:{color:'#158CBA'},children:\"Login\"})]})})]})});};export default RegisterScreen;","map":{"version":3,"sources":["E:/003_Personal_Portfolio/Experimental/evenx-main/frontend/src/screens/RegisterScreen/RegisterScreen.jsx"],"names":["React","useState","useEffect","MainScreen","Form","Button","Row","Col","ErrorMessage","Loading","Link","useHistory","useDispatch","useSelector","register","RegisterScreen","email","setEmail","name","setName","pic","setPic","password","setPassword","confirmpassword","setConfirmPassword","message","setMessage","picMessage","setPicMessage","dispatch","userRegister","state","loading","error","userInfo","history","push","submitHandler","e","preventDefault","postDetails","pics","type","data","FormData","append","fetch","method","body","then","res","json","console","log","url","toString","catch","err","target","value","files","marginTop","fontSize","color"],"mappings":"ghBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,UAAP,KAAuB,6BAAvB,CACA,OAASC,IAAT,CAAeC,MAAf,CAAuBC,GAAvB,CAA4BC,GAA5B,KAAuC,iBAAvC,CACA,MAAOC,CAAAA,YAAP,KAAyB,6CAAzB,CACA,MAAOC,CAAAA,OAAP,KAAoB,oCAApB,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,QAAT,KAAyB,4BAAzB,C,wFAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAGzB,cAA4Bd,QAAQ,CAAE,EAAF,CAApC,wCAAQe,KAAR,eAAeC,QAAf,eACA,eAA0BhB,QAAQ,CAAE,EAAF,CAAlC,yCAAQiB,IAAR,eAAcC,OAAd,eACA,eAAwBlB,QAAQ,CAC5B,oFAD4B,CAAhC,yCAAQmB,GAAR,eAAaC,MAAb,eAGA,eAAkCpB,QAAQ,CAAE,EAAF,CAA1C,yCAAQqB,QAAR,eAAkBC,WAAlB,eACA,eAAgDtB,QAAQ,CAAE,EAAF,CAAxD,0CAAQuB,eAAR,gBAAyBC,kBAAzB,gBACA,gBAAgCxB,QAAQ,CAAE,IAAF,CAAxC,2CAAQyB,OAAR,gBAAiBC,UAAjB,gBACA,gBAAsC1B,QAAQ,CAAE,IAAF,CAA9C,2CAAQ2B,UAAR,gBAAoBC,aAApB,gBAEA,GAAMC,CAAAA,QAAQ,CAAGlB,WAAW,EAA5B,CACA,GAAMmB,CAAAA,YAAY,CAAGlB,WAAW,CAAE,SAAEmB,KAAF,QAAaA,CAAAA,KAAK,CAACD,YAAnB,EAAF,CAAhC,CACA,GAAQE,CAAAA,OAAR,CAAqCF,YAArC,CAAQE,OAAR,CAAiBC,KAAjB,CAAqCH,YAArC,CAAiBG,KAAjB,CAAwBC,QAAxB,CAAqCJ,YAArC,CAAwBI,QAAxB,CAEA,GAAMC,CAAAA,OAAO,CAAGzB,UAAU,EAA1B,CAGAT,SAAS,CAAE,UAAM,CACb,GAAKiC,QAAL,CAAgB,CACZC,OAAO,CAACC,IAAR,CAAc,WAAd,EACH,CACJ,CAJQ,CAIN,CAAED,OAAF,CAAWD,QAAX,CAJM,CAAT,CAOA,GAAMG,CAAAA,aAAa,0FAAG,iBAAQC,CAAR,kHAClBA,CAAC,CAACC,cAAF,GAEA,GAAKlB,QAAQ,GAAKE,eAAlB,CAAoC,CAChCG,UAAU,CAAE,wBAAF,CAAV,CACH,CAFD,IAEO,CACHG,QAAQ,CAAEhB,QAAQ,CAAEI,IAAF,CAAQF,KAAR,CAAeM,QAAf,CAAyBF,GAAzB,CAAV,CAAR,CACH,CAPiB,sDAAH,kBAAbkB,CAAAA,aAAa,4CAAnB,CAWA,GAAMG,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAEC,IAAF,CAAY,CAC5B,GAAK,CAACA,IAAN,CAAa,CACT,MAAOb,CAAAA,aAAa,CAAE,wBAAF,CAApB,CACH,CACDA,aAAa,CAAE,IAAF,CAAb,CAEA,GAAKa,IAAI,CAACC,IAAL,GAAc,YAAd,EAA8BD,IAAI,CAACC,IAAL,GAAc,WAAjD,CAA+D,CAC3D,GAAMC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,QAAJ,EAAb,CACAD,IAAI,CAACE,MAAL,CAAa,MAAb,CAAqBJ,IAArB,EACAE,IAAI,CAACE,MAAL,CAAa,eAAb,CAA8B,OAA9B,EACAF,IAAI,CAACE,MAAL,CAAa,YAAb,CAA2B,WAA3B,EACAC,KAAK,CAAE,wDAAF,CAA4D,CAC7DC,MAAM,CAAE,MADqD,CAE7DC,IAAI,CAAEL,IAFuD,CAA5D,CAAL,CAGIM,IAHJ,CAGU,SAAEC,GAAF,QAAWA,CAAAA,GAAG,CAACC,IAAJ,EAAX,EAHV,EAGkCF,IAHlC,CAGwC,SAAEN,IAAF,CAAY,CAChDS,OAAO,CAACC,GAAR,CAAaV,IAAb,EACAvB,MAAM,CAAEuB,IAAI,CAACW,GAAL,CAASC,QAAT,EAAF,CAAN,CACH,CAND,EAMIC,KANJ,CAMW,SAAEC,GAAF,CAAW,CAClBL,OAAO,CAACC,GAAR,CAAaI,GAAb,EACH,CARD,EASH,CAdD,IAcO,CACH,MAAO7B,CAAAA,aAAa,CAAE,wBAAF,CAApB,CACH,CAEJ,CAxBD,CA0BA,mBACI,KAAC,UAAD,EAAY,KAAK,CAAC,UAAlB,uBACI,aAAK,SAAS,CAAC,gBAAf,WACMK,KAAK,eAAI,KAAC,YAAD,EAAc,OAAO,CAAC,QAAtB,UAAiCA,KAAjC,EADf,CAEMR,OAAO,eAAI,KAAC,YAAD,EAAc,OAAO,CAAC,QAAtB,UAAiCA,OAAjC,EAFjB,CAGMO,OAAO,eAAI,KAAC,OAAD,IAHjB,cAII,MAAC,IAAD,EAAM,QAAQ,CAAGK,aAAjB,wBACI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,mBADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAC,MADT,CAEI,KAAK,CAAGpB,IAFZ,CAGI,WAAW,CAAC,YAHhB,CAII,QAAQ,CAAG,kBAAEqB,CAAF,QAASpB,CAAAA,OAAO,CAAEoB,CAAC,CAACoB,MAAF,CAASC,KAAX,CAAhB,EAJf,EAFJ,GADJ,cAWI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,gBAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,4BADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAC,OADT,CAEI,KAAK,CAAG5C,KAFZ,CAGI,WAAW,CAAC,aAHhB,CAII,QAAQ,CAAG,kBAAEuB,CAAF,QAAStB,CAAAA,QAAQ,CAAEsB,CAAC,CAACoB,MAAF,CAASC,KAAX,CAAjB,EAJf,EAFJ,GAXJ,cAqBI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,mBAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,uBADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAC,UADT,CAEI,KAAK,CAAGtC,QAFZ,CAGI,WAAW,CAAC,UAHhB,CAII,QAAQ,CAAG,kBAAEiB,CAAF,QAAShB,CAAAA,WAAW,CAAEgB,CAAC,CAACoB,MAAF,CAASC,KAAX,CAApB,EAJf,EAFJ,GArBJ,cA+BI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,iBAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,+BADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAC,UADT,CAEI,KAAK,CAAGpC,eAFZ,CAGI,WAAW,CAAC,kBAHhB,CAII,QAAQ,CAAG,kBAAEe,CAAF,QAASd,CAAAA,kBAAkB,CAAEc,CAAC,CAACoB,MAAF,CAASC,KAAX,CAA3B,EAJf,EAFJ,GA/BJ,CAyCMhC,UAAU,eACR,KAAC,YAAD,EAAc,OAAO,CAAC,QAAtB,UAAiCA,UAAjC,EA1CR,cA4CI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,KAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,8BADJ,cAEI,KAAC,IAAD,CAAM,IAAN,EACI,QAAQ,CAAG,kBAAEW,CAAF,QAASE,CAAAA,WAAW,CAAEF,CAAC,CAACoB,MAAF,CAASE,KAAT,CAAgB,CAAhB,CAAF,CAApB,EADf,CAEI,EAAE,CAAC,aAFP,CAGI,IAAI,CAAC,WAHT,CAII,KAAK,CAAC,wBAJV,CAKI,MAAM,KALV,EAFJ,GA5CJ,cAuDI,KAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,IAAI,CAAC,QAA/B,CAAwC,KAAK,CAAG,CAAEC,SAAS,CAAE,EAAb,CAAhD,sBAvDJ,GAJJ,cA+DI,KAAC,GAAD,EAAK,SAAS,CAAC,MAAf,uBACI,MAAC,GAAD,EAAK,KAAK,CAAG,CAAEC,QAAQ,CAAE,EAAZ,CAAb,6CACsB,KAAC,IAAD,EAAM,EAAE,CAAC,QAAT,CAAkB,KAAK,CAAG,CAAEC,KAAK,CAAE,SAAT,CAA1B,mBADtB,GADJ,EA/DJ,GADJ,EADJ,CAyEH,CAzID,CA2IA,cAAejD,CAAAA,cAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport MainScreen from '../../components/MainScreen';\r\nimport { Form, Button, Row, Col } from 'react-bootstrap';\r\nimport ErrorMessage from './../../components/ErroMessage/ErrorMessage';\r\nimport Loading from './../../components/Loading/Loading';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { register } from './../../actions/userAction';\r\n\r\nconst RegisterScreen = () => {\r\n\r\n\r\n    const [ email, setEmail ] = useState( \"\" );\r\n    const [ name, setName ] = useState( \"\" );\r\n    const [ pic, setPic ] = useState(\r\n        \"https://icon-library.com/images/anonymous-avatar-icon/anonymous-avatar-icon-25.jpg\"\r\n    );\r\n    const [ password, setPassword ] = useState( \"\" );\r\n    const [ confirmpassword, setConfirmPassword ] = useState( \"\" );\r\n    const [ message, setMessage ] = useState( null );\r\n    const [ picMessage, setPicMessage ] = useState( null );\r\n\r\n    const dispatch = useDispatch();\r\n    const userRegister = useSelector( ( state ) => state.userRegister );\r\n    const { loading, error, userInfo } = userRegister;\r\n\r\n    const history = useHistory();\r\n\r\n\r\n    useEffect( () => {\r\n        if ( userInfo ) {\r\n            history.push( '/myevents' );\r\n        }\r\n    }, [ history, userInfo ] );\r\n\r\n\r\n    const submitHandler = async ( e ) => {\r\n        e.preventDefault();\r\n\r\n        if ( password !== confirmpassword ) {\r\n            setMessage( 'Passwords do not match' );\r\n        } else {\r\n            dispatch( register( name, email, password, pic ) );\r\n        }\r\n    };\r\n\r\n\r\n    const postDetails = ( pics ) => {\r\n        if ( !pics ) {\r\n            return setPicMessage( 'Please select an image' );\r\n        }\r\n        setPicMessage( null );\r\n\r\n        if ( pics.type === 'image/jpeg' || pics.type === 'image/png' ) {\r\n            const data = new FormData();\r\n            data.append( 'file', pics );\r\n            data.append( 'upload_preset', 'evenx' );\r\n            data.append( 'cloud_name', 'dyl8nylbd' );\r\n            fetch( 'https://api.cloudinary.com/v1_1/dyl8nylbd/image/upload', {\r\n                method: 'post',\r\n                body: data\r\n            } ).then( ( res ) => res.json() ).then( ( data ) => {\r\n                console.log( data );\r\n                setPic( data.url.toString() );\r\n            } ).catch( ( err ) => {\r\n                console.log( err );\r\n            } );\r\n        } else {\r\n            return setPicMessage( 'Please select an image' );\r\n        }\r\n\r\n    };\r\n\r\n    return (\r\n        <MainScreen title=\"REGISTER\">\r\n            <div className=\"loginContainer\">\r\n                { error && <ErrorMessage variant=\"danger\">{ error }</ErrorMessage> }\r\n                { message && <ErrorMessage variant=\"danger\">{ message }</ErrorMessage> }\r\n                { loading && <Loading /> }\r\n                <Form onSubmit={ submitHandler }>\r\n                    <Form.Group controlId=\"name\">\r\n                        <Form.Label>Name</Form.Label>\r\n                        <Form.Control\r\n                            type=\"name\"\r\n                            value={ name }\r\n                            placeholder=\"Enter name\"\r\n                            onChange={ ( e ) => setName( e.target.value ) }\r\n                        />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formBasicEmail\">\r\n                        <Form.Label>Email address</Form.Label>\r\n                        <Form.Control\r\n                            type=\"email\"\r\n                            value={ email }\r\n                            placeholder=\"Enter email\"\r\n                            onChange={ ( e ) => setEmail( e.target.value ) }\r\n                        />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formBasicPassword\">\r\n                        <Form.Label>Password</Form.Label>\r\n                        <Form.Control\r\n                            type=\"password\"\r\n                            value={ password }\r\n                            placeholder=\"Password\"\r\n                            onChange={ ( e ) => setPassword( e.target.value ) }\r\n                        />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"confirmPassword\">\r\n                        <Form.Label>Confirm Password</Form.Label>\r\n                        <Form.Control\r\n                            type=\"password\"\r\n                            value={ confirmpassword }\r\n                            placeholder=\"Confirm Password\"\r\n                            onChange={ ( e ) => setConfirmPassword( e.target.value ) }\r\n                        />\r\n                    </Form.Group>\r\n\r\n                    { picMessage && (\r\n                        <ErrorMessage variant=\"danger\">{ picMessage }</ErrorMessage>\r\n                    ) }\r\n                    <Form.Group controlId=\"pic\">\r\n                        <Form.Label>Profile Picture</Form.Label>\r\n                        <Form.File\r\n                            onChange={ ( e ) => postDetails( e.target.files[ 0 ] ) }\r\n                            id=\"custom-file\"\r\n                            type=\"image/png\"\r\n                            label=\"Upload Profile Picture\"\r\n                            custom\r\n                        />\r\n                    </Form.Group>\r\n\r\n                    <Button variant=\"primary\" type=\"submit\" style={ { marginTop: 10 } }>\r\n                        Register\r\n                    </Button>\r\n                </Form>\r\n                <Row className=\"py-3\">\r\n                    <Col style={ { fontSize: 24 } }>\r\n                        Have an Account ? <Link to=\"/login\" style={ { color: '#158CBA' } }>Login</Link>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        </MainScreen>\r\n    );\r\n};\r\n\r\nexport default RegisterScreen;\r\n"]},"metadata":{},"sourceType":"module"}