{"ast":null,"code":"import _slicedToArray from\"E:/003_Personal_Portfolio/Experimental/evenx-main/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Form,Button,Row,Col}from\"react-bootstrap\";import MainScreen from\"../../components/MainScreen\";import\"./ProfileScreen.css\";import{useDispatch,useSelector}from\"react-redux\";import{updateProfile}from\"../../actions/userAction\";import Loading from\"../../components/Loading/Loading\";import ErrorMessage from\"../../components/ErroMessage/ErrorMessage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProfileScreen=function ProfileScreen(_ref){var location=_ref.location,history=_ref.history;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),pic=_useState6[0],setPic=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),confirmPassword=_useState10[0],setConfirmPassword=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),picMessage=_useState12[0],setPicMessage=_useState12[1];var dispatch=useDispatch();var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userUpdate=useSelector(function(state){return state.userUpdate;});var loading=userUpdate.loading,error=userUpdate.error,success=userUpdate.success;useEffect(function(){if(!userInfo){history.push(\"/\");}else{setName(userInfo.name);setEmail(userInfo.email);setPic(userInfo.pic);}},[history,userInfo]);var postDetails=function postDetails(pics){setPicMessage(null);if(pics.type===\"image/jpeg\"||pics.type===\"image/png\"){var data=new FormData();data.append(\"file\",pics);data.append(\"upload_preset\",\"eventx\");data.append(\"cloud_name\",\"dyl8nylbd\");fetch(\"https://api.cloudinary.com/v1_1/dyl8nylbd/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){setPic(data.url.toString());console.log(pic);}).catch(function(err){console.log(err);});}else{return setPicMessage(\"Please Select an Image\");}};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(updateProfile({name:name,email:email,password:password,pic:pic}));};return/*#__PURE__*/_jsx(MainScreen,{title:\"Edit Profile\",children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Row,{className:\"profileContainer\",children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form,{onSubmit:submitHandler,children:[loading&&/*#__PURE__*/_jsx(Loading,{}),success&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"success\",children:\"Updated Successfully\"}),error&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:error}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"name\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Name\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Enter Name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"email\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email Address\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter Password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"confirmPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Confirm Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Confirm Password\",value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);}})]}),\" \",picMessage&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:picMessage}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"pic\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Change Profile Picture\"}),/*#__PURE__*/_jsx(Form.File,{onChange:function onChange(e){return postDetails(e.target.files[0]);},id:\"custom-file\",type:\"image/png\",label:\"Upload Profile Picture\",custom:true})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",varient:\"primary\",style:{marginTop:10},children:\"Update\"})]})}),/*#__PURE__*/_jsx(Col,{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"img\",{src:pic,alt:name,className:\"profilePic\"})})]})})});};export default ProfileScreen;","map":{"version":3,"sources":["E:/003_Personal_Portfolio/Experimental/evenx-main/frontend/src/screens/ProfileScreen/ProfileScreen.jsx"],"names":["React","useState","useEffect","Form","Button","Row","Col","MainScreen","useDispatch","useSelector","updateProfile","Loading","ErrorMessage","ProfileScreen","location","history","name","setName","email","setEmail","pic","setPic","password","setPassword","confirmPassword","setConfirmPassword","picMessage","setPicMessage","dispatch","userLogin","state","userInfo","userUpdate","loading","error","success","push","postDetails","pics","type","data","FormData","append","fetch","method","body","then","res","json","url","toString","console","log","catch","err","submitHandler","e","preventDefault","target","value","files","marginTop","display","alignItems","justifyContent"],"mappings":"iLAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,IAAT,CAAeC,MAAf,CAAuBC,GAAvB,CAA4BC,GAA5B,KAAuC,iBAAvC,CACA,MAAOC,CAAAA,UAAP,KAAuB,6BAAvB,CACA,MAAO,qBAAP,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,aAAT,KAA8B,0BAA9B,CACA,MAAOC,CAAAA,OAAP,KAAoB,kCAApB,CACA,MAAOC,CAAAA,YAAP,KAAyB,2CAAzB,C,wFAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAA6B,IAAzBC,CAAAA,QAAyB,MAAzBA,QAAyB,CAAfC,OAAe,MAAfA,OAAe,CAC/C,cAA0Bd,QAAQ,CAAE,EAAF,CAAlC,wCAAQe,IAAR,eAAcC,OAAd,eACA,eAA4BhB,QAAQ,CAAE,EAAF,CAApC,yCAAQiB,KAAR,eAAeC,QAAf,eACA,eAAwBlB,QAAQ,EAAhC,yCAAQmB,GAAR,eAAaC,MAAb,eACA,eAAkCpB,QAAQ,CAAE,EAAF,CAA1C,yCAAQqB,QAAR,eAAkBC,WAAlB,eACA,eAAgDtB,QAAQ,CAAE,EAAF,CAAxD,0CAAQuB,eAAR,gBAAyBC,kBAAzB,gBACA,gBAAsCxB,QAAQ,EAA9C,2CAAQyB,UAAR,gBAAoBC,aAApB,gBAEA,GAAMC,CAAAA,QAAQ,CAAGpB,WAAW,EAA5B,CAEA,GAAMqB,CAAAA,SAAS,CAAGpB,WAAW,CAAE,SAAEqB,KAAF,QAAaA,CAAAA,KAAK,CAACD,SAAnB,EAAF,CAA7B,CACA,GAAQE,CAAAA,QAAR,CAAqBF,SAArB,CAAQE,QAAR,CAEA,GAAMC,CAAAA,UAAU,CAAGvB,WAAW,CAAE,SAAEqB,KAAF,QAAaA,CAAAA,KAAK,CAACE,UAAnB,EAAF,CAA9B,CACA,GAAQC,CAAAA,OAAR,CAAoCD,UAApC,CAAQC,OAAR,CAAiBC,KAAjB,CAAoCF,UAApC,CAAiBE,KAAjB,CAAwBC,OAAxB,CAAoCH,UAApC,CAAwBG,OAAxB,CAEAjC,SAAS,CAAE,UAAM,CACb,GAAK,CAAC6B,QAAN,CAAiB,CACbhB,OAAO,CAACqB,IAAR,CAAc,GAAd,EACH,CAFD,IAEO,CACHnB,OAAO,CAAEc,QAAQ,CAACf,IAAX,CAAP,CACAG,QAAQ,CAAEY,QAAQ,CAACb,KAAX,CAAR,CACAG,MAAM,CAAEU,QAAQ,CAACX,GAAX,CAAN,CACH,CACJ,CARQ,CAQN,CAAEL,OAAF,CAAWgB,QAAX,CARM,CAAT,CAUA,GAAMM,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAEC,IAAF,CAAY,CAC5BX,aAAa,CAAE,IAAF,CAAb,CACA,GAAKW,IAAI,CAACC,IAAL,GAAc,YAAd,EAA8BD,IAAI,CAACC,IAAL,GAAc,WAAjD,CAA+D,CAC3D,GAAMC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,QAAJ,EAAb,CACAD,IAAI,CAACE,MAAL,CAAa,MAAb,CAAqBJ,IAArB,EACAE,IAAI,CAACE,MAAL,CAAa,eAAb,CAA8B,QAA9B,EACAF,IAAI,CAACE,MAAL,CAAa,YAAb,CAA2B,WAA3B,EACAC,KAAK,CAAE,wDAAF,CAA4D,CAC7DC,MAAM,CAAE,MADqD,CAE7DC,IAAI,CAAEL,IAFuD,CAA5D,CAAL,CAIKM,IAJL,CAIW,SAAEC,GAAF,QAAWA,CAAAA,GAAG,CAACC,IAAJ,EAAX,EAJX,EAKKF,IALL,CAKW,SAAEN,IAAF,CAAY,CACfnB,MAAM,CAAEmB,IAAI,CAACS,GAAL,CAASC,QAAT,EAAF,CAAN,CACAC,OAAO,CAACC,GAAR,CAAahC,GAAb,EACH,CARL,EASKiC,KATL,CASY,SAAEC,GAAF,CAAW,CACfH,OAAO,CAACC,GAAR,CAAaE,GAAb,EACH,CAXL,EAYH,CAjBD,IAiBO,CACH,MAAO3B,CAAAA,aAAa,CAAE,wBAAF,CAApB,CACH,CACJ,CAtBD,CAwBA,GAAM4B,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAEC,CAAF,CAAS,CAC3BA,CAAC,CAACC,cAAF,GAEA7B,QAAQ,CAAElB,aAAa,CAAE,CAAEM,IAAI,CAAJA,IAAF,CAAQE,KAAK,CAALA,KAAR,CAAeI,QAAQ,CAARA,QAAf,CAAyBF,GAAG,CAAHA,GAAzB,CAAF,CAAf,CAAR,CACH,CAJD,CAMA,mBACI,KAAC,UAAD,EAAY,KAAK,CAAC,cAAlB,uBACI,kCACI,MAAC,GAAD,EAAK,SAAS,CAAC,kBAAf,wBACI,KAAC,GAAD,EAAK,EAAE,CAAG,CAAV,uBACI,MAAC,IAAD,EAAM,QAAQ,CAAGmC,aAAjB,WACMtB,OAAO,eAAI,KAAC,OAAD,IADjB,CAEME,OAAO,eACL,KAAC,YAAD,EAAc,OAAO,CAAC,SAAtB,kCAHR,CAOMD,KAAK,eAAI,KAAC,YAAD,EAAc,OAAO,CAAC,QAAtB,UAAiCA,KAAjC,EAPf,cAQI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,mBADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAC,MADT,CAEI,WAAW,CAAC,YAFhB,CAGI,KAAK,CAAGlB,IAHZ,CAII,QAAQ,CAAG,kBAAEwC,CAAF,QAASvC,CAAAA,OAAO,CAAEuC,CAAC,CAACE,MAAF,CAASC,KAAX,CAAhB,EAJf,EAFJ,GARJ,cAiBI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,OAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,4BADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAC,OADT,CAEI,WAAW,CAAC,aAFhB,CAGI,KAAK,CAAGzC,KAHZ,CAII,QAAQ,CAAG,kBAAEsC,CAAF,QAASrC,CAAAA,QAAQ,CAAEqC,CAAC,CAACE,MAAF,CAASC,KAAX,CAAjB,EAJf,EAFJ,GAjBJ,cA0BI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,UAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,uBADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAC,UADT,CAEI,WAAW,CAAC,gBAFhB,CAGI,KAAK,CAAGrC,QAHZ,CAII,QAAQ,CAAG,kBAAEkC,CAAF,QAASjC,CAAAA,WAAW,CAAEiC,CAAC,CAACE,MAAF,CAASC,KAAX,CAApB,EAJf,EAFJ,GA1BJ,cAmCI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,iBAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,+BADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EACI,IAAI,CAAC,UADT,CAEI,WAAW,CAAC,kBAFhB,CAGI,KAAK,CAAGnC,eAHZ,CAII,QAAQ,CAAG,kBAAEgC,CAAF,QAAS/B,CAAAA,kBAAkB,CAAE+B,CAAC,CAACE,MAAF,CAASC,KAAX,CAA3B,EAJf,EAFJ,GAnCJ,CA2CmB,GA3CnB,CA4CMjC,UAAU,eACR,KAAC,YAAD,EAAc,OAAO,CAAC,QAAtB,UAAiCA,UAAjC,EA7CR,cA+CI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,KAAtB,wBACI,KAAC,IAAD,CAAM,KAAN,qCADJ,cAEI,KAAC,IAAD,CAAM,IAAN,EACI,QAAQ,CAAG,kBAAE8B,CAAF,QAASnB,CAAAA,WAAW,CAAEmB,CAAC,CAACE,MAAF,CAASE,KAAT,CAAgB,CAAhB,CAAF,CAApB,EADf,CAEI,EAAE,CAAC,aAFP,CAGI,IAAI,CAAC,WAHT,CAII,KAAK,CAAC,wBAJV,CAKI,MAAM,KALV,EAFJ,GA/CJ,cAyDI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,OAAO,CAAC,SAA9B,CAAwC,KAAK,CAAG,CAAEC,SAAS,CAAE,EAAb,CAAhD,oBAzDJ,GADJ,EADJ,cAgEI,KAAC,GAAD,EACI,KAAK,CAAG,CACJC,OAAO,CAAE,MADL,CAEJC,UAAU,CAAE,QAFR,CAGJC,cAAc,CAAE,QAHZ,CADZ,uBAOI,YAAK,GAAG,CAAG5C,GAAX,CAAiB,GAAG,CAAGJ,IAAvB,CAA8B,SAAS,CAAC,YAAxC,EAPJ,EAhEJ,GADJ,EADJ,EADJ,CAgFH,CAxID,CA0IA,cAAeH,CAAAA,aAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Form, Button, Row, Col } from \"react-bootstrap\";\r\nimport MainScreen from \"../../components/MainScreen\";\r\nimport \"./ProfileScreen.css\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { updateProfile } from \"../../actions/userAction\";\r\nimport Loading from \"../../components/Loading/Loading\";\r\nimport ErrorMessage from \"../../components/ErroMessage/ErrorMessage\";\r\n\r\nconst ProfileScreen = ( { location, history } ) => {\r\n    const [ name, setName ] = useState( \"\" );\r\n    const [ email, setEmail ] = useState( \"\" );\r\n    const [ pic, setPic ] = useState();\r\n    const [ password, setPassword ] = useState( \"\" );\r\n    const [ confirmPassword, setConfirmPassword ] = useState( \"\" );\r\n    const [ picMessage, setPicMessage ] = useState();\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const userLogin = useSelector( ( state ) => state.userLogin );\r\n    const { userInfo } = userLogin;\r\n\r\n    const userUpdate = useSelector( ( state ) => state.userUpdate );\r\n    const { loading, error, success } = userUpdate;\r\n\r\n    useEffect( () => {\r\n        if ( !userInfo ) {\r\n            history.push( \"/\" );\r\n        } else {\r\n            setName( userInfo.name );\r\n            setEmail( userInfo.email );\r\n            setPic( userInfo.pic );\r\n        }\r\n    }, [ history, userInfo ] );\r\n\r\n    const postDetails = ( pics ) => {\r\n        setPicMessage( null );\r\n        if ( pics.type === \"image/jpeg\" || pics.type === \"image/png\" ) {\r\n            const data = new FormData();\r\n            data.append( \"file\", pics );\r\n            data.append( \"upload_preset\", \"eventx\" );\r\n            data.append( \"cloud_name\", \"dyl8nylbd\" );\r\n            fetch( \"https://api.cloudinary.com/v1_1/dyl8nylbd/image/upload\", {\r\n                method: \"post\",\r\n                body: data,\r\n            } )\r\n                .then( ( res ) => res.json() )\r\n                .then( ( data ) => {\r\n                    setPic( data.url.toString() );\r\n                    console.log( pic );\r\n                } )\r\n                .catch( ( err ) => {\r\n                    console.log( err );\r\n                } );\r\n        } else {\r\n            return setPicMessage( \"Please Select an Image\" );\r\n        }\r\n    };\r\n\r\n    const submitHandler = ( e ) => {\r\n        e.preventDefault();\r\n\r\n        dispatch( updateProfile( { name, email, password, pic } ) );\r\n    };\r\n\r\n    return (\r\n        <MainScreen title=\"Edit Profile\">\r\n            <div>\r\n                <Row className=\"profileContainer\">\r\n                    <Col md={ 6 }>\r\n                        <Form onSubmit={ submitHandler }>\r\n                            { loading && <Loading /> }\r\n                            { success && (\r\n                                <ErrorMessage variant=\"success\">\r\n                                    Updated Successfully\r\n                                </ErrorMessage>\r\n                            ) }\r\n                            { error && <ErrorMessage variant=\"danger\">{ error }</ErrorMessage> }\r\n                            <Form.Group controlId=\"name\">\r\n                                <Form.Label>Name</Form.Label>\r\n                                <Form.Control\r\n                                    type=\"text\"\r\n                                    placeholder=\"Enter Name\"\r\n                                    value={ name }\r\n                                    onChange={ ( e ) => setName( e.target.value ) }\r\n                                ></Form.Control>\r\n                            </Form.Group>\r\n                            <Form.Group controlId=\"email\">\r\n                                <Form.Label>Email Address</Form.Label>\r\n                                <Form.Control\r\n                                    type=\"email\"\r\n                                    placeholder=\"Enter Email\"\r\n                                    value={ email }\r\n                                    onChange={ ( e ) => setEmail( e.target.value ) }\r\n                                ></Form.Control>\r\n                            </Form.Group>\r\n                            <Form.Group controlId=\"password\">\r\n                                <Form.Label>Password</Form.Label>\r\n                                <Form.Control\r\n                                    type=\"password\"\r\n                                    placeholder=\"Enter Password\"\r\n                                    value={ password }\r\n                                    onChange={ ( e ) => setPassword( e.target.value ) }\r\n                                ></Form.Control>\r\n                            </Form.Group>\r\n                            <Form.Group controlId=\"confirmPassword\">\r\n                                <Form.Label>Confirm Password</Form.Label>\r\n                                <Form.Control\r\n                                    type=\"password\"\r\n                                    placeholder=\"Confirm Password\"\r\n                                    value={ confirmPassword }\r\n                                    onChange={ ( e ) => setConfirmPassword( e.target.value ) }\r\n                                ></Form.Control>\r\n                            </Form.Group>{ \" \" }\r\n                            { picMessage && (\r\n                                <ErrorMessage variant=\"danger\">{ picMessage }</ErrorMessage>\r\n                            ) }\r\n                            <Form.Group controlId=\"pic\">\r\n                                <Form.Label>Change Profile Picture</Form.Label>\r\n                                <Form.File\r\n                                    onChange={ ( e ) => postDetails( e.target.files[ 0 ] ) }\r\n                                    id=\"custom-file\"\r\n                                    type=\"image/png\"\r\n                                    label=\"Upload Profile Picture\"\r\n                                    custom\r\n                                />\r\n                            </Form.Group>\r\n                            <Button type=\"submit\" varient=\"primary\" style={ { marginTop: 10 } }>\r\n                                Update\r\n                            </Button>\r\n                        </Form>\r\n                    </Col>\r\n                    <Col\r\n                        style={ {\r\n                            display: \"flex\",\r\n                            alignItems: \"center\",\r\n                            justifyContent: \"center\",\r\n                        } }\r\n                    >\r\n                        <img src={ pic } alt={ name } className=\"profilePic\" />\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        </MainScreen>\r\n    );\r\n};\r\n\r\nexport default ProfileScreen;"]},"metadata":{},"sourceType":"module"}